<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<input id="t1"></input>
<script>
    // å¯å¼€å…³çš„æ§åˆ¶å°è¾“å‡º
    var sout = ()=>{}
    sout.open = 1;
    sout.sw = (x)=>{sout.open=x}
    sout.log = (...x)=>{
        if (sout.open) {
            console.log(...x);
        }
    }
    // å…³é—­è¾“å‡º
    sout.sw(0);

    /***** jqueryäº‹ä»¶ *****/
    // è¾“å…¥æ¡†å¤±ç„¦æ—¶è§¦å‘bluräº‹ä»¶
    $("#t1").blur(function(e){
        console.log("æˆ‘æ²¡äº†å•Šå…„dei" + e.target.value);
    });

    /***** js *****/
    // lambdaè¡¨è¾¾å¼æŠ½å‡ºæ¥è¿˜èƒ½ä¸èƒ½ç”¨(èƒ½)
    let arr = [0,1,2,3];
    arr.forEach((e)=>{sout.log(e)});
    function t2(e) {
        sout.log(e);
    }
    arr.forEach(t2);

    // è°ƒç”¨å¹¶æ‰“å°ç»“æœ
    function timeit(f) {
        let n = arguments.length;
        let start = new Date();
        if (n == 0) {
            sout.log("è¾“å…¥ä¸å¯¹åŠ²ï¼šè‡³å°‘è¦å°†æ–¹æ³•ä¼ å…¥");
            return;
        } else if (n == 1) {
            sout.log("æ— å‚æ•°è¾“å…¥ï¼Œå‡½æ•°ç»“æœä¸ºï¼š"+f());
            return;
        } else if (n == 2) {
            x = arguments[1];
        } else {
            x = "("
            for (let i=1; i<n; i++) {
                x += arguments[i];
            }
            x += ")";
        }
        let nargs = [].slice.call(arguments,1);
        sout.log("è¾“å…¥ä¸º["+x+"]çš„ç»“æœæ˜¯ï¼š"+f(...nargs));
        sout.log("æœ¬æ¬¡è°ƒç”¨è€—æ—¶ï¼š", new Date() - start, "s");
    }

    // 16è¿›åˆ¶æ•°ç”¨16è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤º
    function to_hex(x) {
        if (x >= 16) return false;
        if (x >= 10) return ['a','b','c','d','e','f'][x-10];
        return x + "";
    }

    // æ‰“å°åè¿›åˆ¶è½¬16è¿›åˆ¶å­—ç¬¦ä¸²
    function oct_hex(x) {
        let res = "";
        while (x) {
            res = to_hex(x % 16) + res;
            x = Math.floor(x/16);
        }
        res = '0x'+res;
        return res;
    }
    // ç»“æœ0xdac
    oct_hex(3500);
    timeit(oct_hex, 3500);

    sout.sw(1); // æ‰“å¼€è¾“å‡º

    /*
        utf-8 ç¼–ç è§„åˆ™
        0000 0000-0000 007F 0xxxxxxx
        0000 0080-0000 07FF 110xxxxx 10xxxxxx
        0000 0800-0000 FFFF 1110xxxx 10xxxxxx 10xxxxxx
        0001 0000-001F FFFF 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
        0020 0000-03FF FFFF 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
        0400 0000-7FFF FFFF 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
    */
    // åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºutf-8ç¼–ç 
    function isutf8(s) {
        for (let i=0; i<s.length; i++) {
            let chr = s.charCodeAt(i);
            let c = s.charAt(i);
            if (chr >= 128) {
                try {
                    let tc = encodeURIComponent(c);
                    // sout.log(c, oct_hex(chr), tc);
                } catch {
                    return false;
                }
            }
        }
        return true;
    }
    let printstreamutf8 = (x) => {return x + (isutf8(x)?"æ˜¯":"ä¸æ˜¯") + "utf-8æ ¼å¼";}
    let tutf8 = "æœˆå…¥1800ï¼Œæ‘¸é±¼ç¬‘å“ˆå“ˆã€‚";
    let futf8 = "æˆ‘ç»™ä½ ğŸæ¥ğŸ±æ‹³";
    timeit(isutf8, tutf8);
    timeit(isutf8, futf8);

</script>
